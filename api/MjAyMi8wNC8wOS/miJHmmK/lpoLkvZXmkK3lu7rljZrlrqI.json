{"title":"我是如何搭建博客","date":"2022-04-09T23:31:00.000Z","date_formatted":{"ll":"Apr 9, 2022","L":"04/09/2022","MM-DD":"04-09"},"link":"2022/04/09/我是如何搭建博客","tags":["Github Actions","Github Page","Hexo"],"updated":"2023-07-14T09:02:41.322Z","content":"<h2 id=\"前言\">前言<a title=\"#前言\" href=\"#前言\"></a></h2>\n<p>看完本篇，我们将学习到</p>\n<ol>\n<li>使用hexo搭建博客以及写博客的基本知识</li>\n<li>如何部署到Github Page</li>\n<li>如何利用Github Actions进行自动化部署</li>\n</ol>\n<p>首先，来聊一下思路。 通过利用hexo框架来生成静态文件， 并在github创建两个仓库， 一个为<strong>公开的Github Page仓库</strong>用来部署博客站点，这个需要<strong>公开</strong>，这样别人才能访问得到， 而另一个为<strong>私密仓库</strong>来存放博客项目， 使用一个私密仓库来存放的原因是，这样可以使我们的草稿博客别人无法查看到。 最后利用Github Actions来实现自动部署。</p>\n<h2 id=\"hexo\">Hexo<a title=\"#hexo\" href=\"#hexo\"></a></h2>\n<p>hexo是一个使用markdown来解析文章， 然后根据主题生成对应的静态页面框架。</p>\n<h3 id=\"准备阶段\">准备阶段<a title=\"#准备阶段\" href=\"#准备阶段\"></a></h3>\n<p>请确保在安装之前请确保已经安装<code>node</code>和<code>git</code>, 如果还未安装，如果是Mac用户， 可以使用Homebrew来进行安装。 如果是Windows用户， 可以查阅<a href=\"https://nodejs.org/en/\" target=\"_blank\">node官网</a> 以及 <a href=\"https://git-scm.com/downloads\" target=\"_blank\">git官网</a></p>\n<h3 id=\"安装\">安装<a title=\"#安装\" href=\"#安装\"></a></h3>\n<p>在必备的应用程序安装成功后， 即可通过npm来安装hexo</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install -g hexo-cli</span></span><br></pre></td></tr></table></figure>\n<p>可以通过下面命令进行验证， 如果安装成功， 将会输出相关工具的版本信息</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> hexo version</span></span><br><span class=\"line\">hexo-cli: 4.3.0</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"建站\">建站<a title=\"#建站\" href=\"#建站\"></a></h3>\n<p>使用下列命令来创建一个存放博客的文件夹，并生成所需的文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> hexo init &lt;folder&gt;</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> &lt;folder&gt;</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install</span></span><br></pre></td></tr></table></figure>\n<p>创建成功， 目录结构将是如下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.  </span><br><span class=\"line\">├── _config.yml </span><br><span class=\"line\">├── package.json </span><br><span class=\"line\">├── scaffolds     </span><br><span class=\"line\">├── source  </span><br><span class=\"line\">|   ├── _drafts  </span><br><span class=\"line\">|   └── _posts  </span><br><span class=\"line\">└── themes</span><br></pre></td></tr></table></figure>\n<h4 id=\"_config.yml\">_config.yml<a title=\"#_config.yml\" href=\"#_config.yml\"></a></h4>\n<p>网站的全局的配置文件</p>\n<h4 id=\"package.json\">package.json<a title=\"#package.json\" href=\"#package.json\"></a></h4>\n<p>npm等工具的配置文件</p>\n<h4 id=\"scaffolds\">scaffolds<a title=\"#scaffolds\" href=\"#scaffolds\"></a></h4>\n<p>模版文件夹， hexo会根据相应scaffold来创建对应文件， 可以在该目录下创建各种布局文件</p>\n<h4 id=\"source\">source<a title=\"#source\" href=\"#source\"></a></h4>\n<p>用于存放资源的地方， 除了_posts文件夹，其他以_开头的文件夹和文件都会被忽略，文件会解析到public文件夹</p>\n<h4 id=\"themes\">themes<a title=\"#themes\" href=\"#themes\"></a></h4>\n<p>主题文件夹， Hexo 会根据主题来生成静态页面。</p>\n<h3 id=\"配置\">配置<a title=\"#配置\" href=\"#配置\"></a></h3>\n<p>对于网站的配置，可以简单先了解下面几项并根据自己情况进行修改， 更加详细可以查阅<a href=\"https://hexo.io/zh-cn/docs/configuration\" target=\"_blank\">文档</a></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 网站相关配置</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">&#x27;&#x27;</span> <span class=\"comment\"># 网站标题</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;&#x27;</span> <span class=\"comment\"># 网站副标题</span></span><br><span class=\"line\"><span class=\"attr\">description:</span> <span class=\"string\">&#x27;&#x27;</span> <span class=\"comment\"># 网站描述</span></span><br><span class=\"line\"><span class=\"attr\">keywords:</span> <span class=\"comment\"># 网站关键词， 支持多个关键词</span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">&#x27;&#x27;</span> <span class=\"comment\"># 你的名字</span></span><br><span class=\"line\"><span class=\"attr\">timezone:</span> <span class=\"string\">&#x27;Asia/Shanghai&#x27;</span> <span class=\"comment\"># 网站时区</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 网址</span></span><br><span class=\"line\"><span class=\"comment\"># 网站的地址，本文会使用github page，所以可以将下面的username改为你的用户名</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://username.github.io/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 主题, 本文选择inside主题，如果也喜欢这款主题可以不做修改</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">inside</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 部署</span></span><br><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"comment\"># 本文使用github page, 可以改成你github page仓库地址</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span> <span class=\"string\">git@github.com:&lt;你的</span> <span class=\"string\">Github</span> <span class=\"string\">用户名&gt;/&lt;你的</span> <span class=\"string\">Github</span> <span class=\"string\">用户名&gt;.github.io.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">main</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"写作\">写作<a title=\"#写作\" href=\"#写作\"></a></h3>\n<p>通过下面命令生成一个新的文章或者页面</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> hexo new [layout] &lt;title&gt;</span></span><br></pre></td></tr></table></figure>\n<p>可以指定布局， 默认是post， 可以在<code>_config.yml</code>文件中的<code>default_layout</code>配置项进行配置， 会根据scaffolds目录下的布局模版进行创建。 使用post布局时， 文章会显示在页面中。使用draft布局不会显示在页面当中， 但是可以通过在执行<code>hexo</code>命令时添加<code>--draft</code>参数， 或者在<code>_config.yml</code>文件中的<code>render_drafts</code>配置项配置成<code>true</code>，并且可以通过下面命令来进行公开发布。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> hexo publish [layout] &lt;title&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"使用主题\">使用主题<a title=\"#使用主题\" href=\"#使用主题\"></a></h3>\n<p>你可以到<a href=\"https://hexo.io/themes/\" target=\"_blank\">网站</a> 选择自己喜欢的主题， 本文将选择<a href=\"https://github.com/ikeq/hexo-theme-inside\" target=\"_blank\">inside</a> 主题来讲解</p>\n<p>首先通过下面命令安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install hexo-theme-inside</span></span><br></pre></td></tr></table></figure>\n<p>配置_config.yml</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">theme: inside</span><br></pre></td></tr></table></figure>\n<p>在项目目录下创建主题配置文件<code>_config.inside.yml</code>， 可以将下面配置复制过去，该配置的效果情况可以查看我的博客， 如有不喜欢的地方， 可以查阅 <a href=\"https://blog.oniuo.com/theme-inside\" target=\"_blank\">这里</a> 根据自己的喜好进行配置。</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">profile:</span></span><br><span class=\"line\">  <span class=\"comment\"># 可以在source目录新建一个image文件夹， 然后放入自己的头像，按照下面改为自己的路径</span></span><br><span class=\"line\">  <span class=\"attr\">avatar:</span> <span class=\"string\">/image/avatar.gif</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 字体文件路径</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">//fonts.googleapis.com/css？family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 整个网站的默认字体</span></span><br><span class=\"line\"><span class=\"attr\">base:</span> <span class=\"string\">&quot;&#x27;Josefin Sans&#x27;,&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 侧边栏作者字体</span></span><br><span class=\"line\"><span class=\"attr\">logo:</span> <span class=\"string\">&quot;Lobster,cursive,&#x27;Josefin Sans&#x27;,&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 侧边栏菜单字体</span></span><br><span class=\"line\"><span class=\"attr\">menu:</span> <span class=\"string\">&quot;IM Fell DW Pica SC,&#x27;Josefin Sans&#x27;,&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 用于下列地方的字体</span></span><br><span class=\"line\"><span class=\"comment\"># fab按钮的百分比</span></span><br><span class=\"line\"><span class=\"comment\"># 文章页面的月份</span></span><br><span class=\"line\"><span class=\"comment\"># 文章的计数</span></span><br><span class=\"line\"><span class=\"comment\"># 分页</span></span><br><span class=\"line\"><span class=\"comment\"># TOC索引</span></span><br><span class=\"line\"><span class=\"comment\"># 类别</span></span><br><span class=\"line\"><span class=\"attr\">label:</span> <span class=\"string\">&quot;Sarpanch,&#x27;Josefin Sans&#x27;,&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Headline(h1, h2, h3, h4, h5, h6) font, fallback to `base`</span></span><br><span class=\"line\"><span class=\"comment\"># h1~h6标题字体</span></span><br><span class=\"line\"><span class=\"attr\">heading:</span> <span class=\"string\">&quot;impact,&#x27;Josefin Sans&#x27;,&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 代码和代码块字体</span></span><br><span class=\"line\"><span class=\"attr\">code:</span> <span class=\"string\">&quot;&#x27;Fira Code&#x27;,Consolas,monospace&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 打印时的字体</span></span><br><span class=\"line\"><span class=\"attr\">print:</span> <span class=\"string\">&quot;&#x27;PingFang SC&#x27;,&#x27;Microsoft YaHei&#x27;&quot;</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"comment\"># 黑暗模式颜色配置</span></span><br><span class=\"line\"><span class=\"attr\">darkmode:</span></span><br><span class=\"line\">  <span class=\"attr\">accent_color:</span> <span class=\"string\">&#x27;#539bf5&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">foreground_color:</span> <span class=\"string\">&#x27;#adbac7&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">border_color:</span> <span class=\"string\">&#x27;#373e47&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">&#x27;#22272e&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">sidebar_background:</span> <span class=\"string\">&#x27;#22272e&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">card_background:</span> <span class=\"string\">&#x27;#2d333b&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">highlight:</span> [</span><br><span class=\"line\">    <span class=\"string\">&#x27;#2d333b&#x27;</span>, <span class=\"string\">&#x27;#444c56&#x27;</span>, <span class=\"string\">&#x27;#3e4451&#x27;</span>, <span class=\"string\">&#x27;#545862&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;#565c64&#x27;</span>, <span class=\"string\">&#x27;#abb2bf&#x27;</span>, <span class=\"string\">&#x27;#b6bdca&#x27;</span>, <span class=\"string\">&#x27;#c8ccd4&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;#e06c75&#x27;</span>, <span class=\"string\">&#x27;#d19a66&#x27;</span>, <span class=\"string\">&#x27;#e5c07b&#x27;</span>, <span class=\"string\">&#x27;#98c379&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;#56b6c2&#x27;</span>, <span class=\"string\">&#x27;#61afef&#x27;</span>, <span class=\"string\">&#x27;#c678dd&#x27;</span>, <span class=\"string\">&#x27;#be5046&#x27;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\"><span class=\"comment\"># 底部设置</span></span><br><span class=\"line\"><span class=\"attr\">footer:</span></span><br><span class=\"line\">  <span class=\"attr\">powered:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">theme:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"github-page\">Github Page<a title=\"#github-page\" href=\"#github-page\"></a></h2>\n<p>到这里， 可以在Github创建两个仓库</p>\n<ol>\n<li>一个<strong>公开</strong>的用于存放站点的仓库，为了能够通过域名<code>&lt;你的 GitHub 用户名&gt;.github.io</code> 来访问， 这个仓库的名称<strong>必须</strong>为<code>&lt;你的 GitHub 用户名&gt;.github.io</code></li>\n<li>一个私密的仓库用于存放项目，名称可以随意，这里我们先用<code>repo</code>来指代,  将下面的<code>.gitignore</code> 加入项目， 可以根据情况添加其他忽略项， 然后将项目推送的<code>repos</code>仓库。</li>\n</ol>\n<h2 id=\"github-actions-runner\">Github Actions Runner<a title=\"#github-actions-runner\" href=\"#github-actions-runner\"></a></h2>\n<p>接下来， 我们来聊聊如何利用Github Actions来实现自动生成网站的静态文件并推送至<code>&lt;你的 GitHub 用户名&gt;.github.io</code> 仓库。 只要简单几步就可以达成这些任务。</p>\n<ol>\n<li>需要生成用于执行自动化任务的电脑与Github进行交互时需要的密钥， 执行下列命令， 会在当前目录下生成 <code>github-deploy-key</code> 和 <code>github-deploy-key.pub</code> 两个文件。</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ssh-keygen -f github-deploy-key</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>\n<p>复制github-deploy-key的内容，到上一节所创建的私密仓库 <code>repos</code> 的 <code>Settings -&gt; Secrets -&gt; Actions -&gt; New repository secret</code></p>\n<ol>\n<li>在 <code>Name</code> 输入框填写 <code>ACTION_DEPLOY_PRI</code></li>\n<li>在 <code>Value</code> 输入框填写 <code>github-deploy-key</code> 文件内容</li>\n</ol>\n<p><img src=\"image/1649517937493.jpg?\" alt=\"添加Github-Deploy-Key示范图\" loading=\"lazy\" class=\"φbp\"></p>\n</li>\n<li>\n<p>复制 <code>github-deploy-key.pub</code> 文件内容，在 <code>&lt;你的 GitHub 用户名&gt;.github.io</code> 仓库 <code>Settings -&gt; Deploy keys -&gt; Add deploy key</code> 页面上添加。</p>\n<ol>\n<li>在 <code>Title</code> 输入框填写 <code>ACTION_DEPLOY_PUB</code></li>\n<li>在 <code>Key</code> 输入框填写 <code>github-deploy-key.pub</code> 文件内容</li>\n<li>勾选 <code>Allow write access</code> 选项</li>\n</ol>\n<p><img src=\"image/1649519164835.jpg?\" alt=\"添加Github-Deploy-Key.pub示范图\" loading=\"lazy\" class=\"φbp\"></p>\n</li>\n<li>\n<p>编写Github Actions， 在项目目录下创建<code>.github/workflows/deploy.yml</code>， 目录结构如下</p>\n</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blog (repository)</span><br><span class=\"line\">└── .github</span><br><span class=\"line\">    └── workflows</span><br><span class=\"line\">        └── deploy.yml</span><br></pre></td></tr></table></figure>\n<p><code>deploy.yml</code> 内容可以复制下面内容， 并修改GIT_USER_NAME和GIT_USER_EMAIL</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 该Action名称</span></span><br><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">CI</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 何时触发</span></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">main</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 环境变量</span></span><br><span class=\"line\"><span class=\"attr\">env:</span></span><br><span class=\"line\">  <span class=\"comment\"># git的用户名</span></span><br><span class=\"line\">  <span class=\"attr\">GIT_USER_NAME:</span> <span class=\"string\">你的Git用户名</span></span><br><span class=\"line\">  <span class=\"comment\"># git的邮箱</span></span><br><span class=\"line\">  <span class=\"attr\">GIT_USER_EMAIL:</span> <span class=\"string\">你的Git邮箱</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">Build</span> <span class=\"string\">on</span> <span class=\"string\">node</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">matrix.node_version</span> <span class=\"string\">&#125;&#125;</span> <span class=\"string\">and</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">matrix.os</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">strategy:</span></span><br><span class=\"line\">      <span class=\"attr\">matrix:</span></span><br><span class=\"line\">        <span class=\"attr\">os:</span> [<span class=\"string\">ubuntu-latest</span>]</span><br><span class=\"line\">        <span class=\"attr\">node_version:</span> [<span class=\"number\">16.</span><span class=\"string\">x</span>]</span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Check</span> <span class=\"string\">out</span> <span class=\"string\">repository</span> <span class=\"string\">code</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Node</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">version:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">matrix.node_version</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Hexo</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span> <span class=\"string\">hexo-cli</span> <span class=\"string\">-g</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Set</span> <span class=\"string\">Env</span></span><br><span class=\"line\">        <span class=\"attr\">env:</span></span><br><span class=\"line\">          <span class=\"attr\">ACTION_DEPLOY_KEY:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.ACTION_DEPLOY_PRI</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          mkdir -p ~/.ssh/</span></span><br><span class=\"line\"><span class=\"string\">          echo &quot;$ACTION_DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.email $GIT_USER_EMAIL</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.name $GIT_USER_NAME</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          hexo deploy</span></span><br></pre></td></tr></table></figure>","prev":{"title":"如何用langchain与你的文档进行交互","link":"2023/07/14/如何用langchain与你的文档进行交互"},"plink":"http://donglong.github.com/2022/04/09/我是如何搭建博客/","toc":[{"id":"前言","title":"前言","index":"1"},{"id":"hexo","title":"Hexo","index":"2","children":[{"id":"准备阶段","title":"准备阶段","index":"2.1"},{"id":"安装","title":"安装","index":"2.2"},{"id":"建站","title":"建站","index":"2.3"},{"id":"配置","title":"配置","index":"2.4"},{"id":"写作","title":"写作","index":"2.5"},{"id":"使用主题","title":"使用主题","index":"2.6"}]},{"id":"github-page","title":"Github Page","index":"3"},{"id":"github-actions-runner","title":"Github Actions Runner","index":"4"}],"reward":true,"reading_time":"1962 words in 13 min"}